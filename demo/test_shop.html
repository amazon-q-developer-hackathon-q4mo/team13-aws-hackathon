<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TechMall - LiveInsight í…ŒìŠ¤íŠ¸ ì‡¼í•‘ëª°</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        .hero-banner { 
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=1200'); 
            background-size: cover; 
            color: white; 
            padding: 80px 0; 
        }
        .product-card { 
            transition: transform 0.3s; 
            border: none;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .product-card:hover { 
            transform: translateY(-5px); 
        }
        .price { color: #e74c3c; font-weight: bold; font-size: 1.2em; }
        .cart-badge { 
            position: absolute; 
            top: -8px; 
            right: -8px; 
            background: #e74c3c; 
            color: white; 
            border-radius: 50%; 
            width: 20px; 
            height: 20px; 
            font-size: 12px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        }
        .tracking-indicator {
            position: fixed;
            top: 20px;
            right: 20px;
            background: #28a745;
            color: white;
            padding: 10px 15px;
            border-radius: 25px;
            font-size: 14px;
            z-index: 1000;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .tracking-indicator .pulse {
            display: inline-block;
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            margin-right: 8px;
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.2); }
            100% { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body>
    <!-- ì¶”ì  ìƒíƒœ í‘œì‹œ -->
    <div class="tracking-indicator">
        <span class="pulse"></span>
        LiveInsight ì¶”ì  ì¤‘
    </div>

    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#" onclick="trackPageView('/')">
                <i class="fas fa-shopping-bag me-2"></i>TechMall
            </a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="#products" onclick="trackPageView('/products')">
                    <i class="fas fa-laptop me-1"></i>ì œí’ˆ
                </a>
                <a class="nav-link position-relative" href="#" onclick="showCart()">
                    <i class="fas fa-shopping-cart me-1"></i>ì¥ë°”êµ¬ë‹ˆ
                    <span class="cart-badge" id="cartCount">0</span>
                </a>
            </div>
        </div>
    </nav>

    <!-- Hero Banner -->
    <section class="hero-banner text-center">
        <div class="container">
            <h1 class="display-4 mb-4">ğŸ‰ íŠ¹ê°€ ì„¸ì¼!</h1>
            <p class="lead mb-4">ìµœì‹  ì „ìì œí’ˆì„ íŠ¹ê°€ë¡œ ë§Œë‚˜ë³´ì„¸ìš”</p>
            <button class="btn btn-warning btn-lg" onclick="trackConversion('hero_cta')">
                <i class="fas fa-bolt me-2"></i>ì§€ê¸ˆ ì‡¼í•‘í•˜ê¸°
            </button>
        </div>
    </section>

    <!-- Products Section -->
    <section class="py-5" id="products">
        <div class="container">
            <h2 class="text-center mb-4">ğŸ”¥ ì¸ê¸° ìƒí’ˆ</h2>
            <div class="row" id="productGrid">
                <!-- ìƒí’ˆë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </section>

    <!-- Cart Modal -->
    <div class="modal fade" id="cartModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">
                        <i class="fas fa-shopping-cart me-2"></i>ì¥ë°”êµ¬ë‹ˆ
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="cartItems">
                    <p class="text-center text-muted">ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤</p>
                </div>
                <div class="modal-footer">
                    <div class="w-100">
                        <div class="d-flex justify-content-between align-items-center mb-3">
                            <h5>ì´ ê¸ˆì•¡: <span id="totalPrice">0</span>ì›</h5>
                        </div>
                        <button type="button" class="btn btn-success w-100" onclick="checkout()">
                            <i class="fas fa-credit-card me-2"></i>ê²°ì œí•˜ê¸°
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- LiveInsight SDK -->
    <script src="https://liveinsight-js-sdk-vsalq4sz.s3.us-east-1.amazonaws.com/liveinsight-tracker.js"></script>
    
    <script>
        // ìƒí’ˆ ë°ì´í„°
        const products = [
            {
                id: 1, name: "MacBook Pro 16ì¸ì¹˜", 
                price: 3200000, 
                image: "https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=300"
            },
            {
                id: 2, name: "iPhone 15 Pro", 
                price: 1350000,
                image: "https://images.unsplash.com/photo-1592750475338-74b7b21085ab?w=300"
            },
            {
                id: 3, name: "iPad Pro 12.9ì¸ì¹˜", 
                price: 1450000,
                image: "https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=300"
            },
            {
                id: 4, name: "AirPods Pro", 
                price: 280000,
                image: "https://images.unsplash.com/photo-1606220945770-b5b6c2c55bf1?w=300"
            },
            {
                id: 5, name: "Apple Watch Ultra", 
                price: 950000,
                image: "https://images.unsplash.com/photo-1434493789847-2f02dc6ca35d?w=300"
            },
            {
                id: 6, name: "Samsung Galaxy S24", 
                price: 1200000,
                image: "https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=300"
            }
        ];

        let cart = [];

        // LiveInsight ì´ˆê¸°í™” - ë°°í¬ëœ API ì—”ë“œí¬ì¸íŠ¸ ì‚¬ìš©
        document.addEventListener('DOMContentLoaded', function() {
            // í™˜ê²½ì— ë”°ë¥¸ API ì—”ë“œí¬ì¸íŠ¸ ì„ íƒ
            const apiUrl = 'https://qnwoi1ardd.execute-api.us-east-1.amazonaws.com/prod/events';
            
            LiveInsight.init({
                apiUrl: apiUrl
            });

            renderProducts();
            console.log('ğŸ›’ TechMall í…ŒìŠ¤íŠ¸ ì‡¼í•‘ëª°ì´ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!');
            console.log('ğŸ“Š ëª¨ë“  ì‚¬ìš©ì í–‰ë™ì´ LiveInsightë¡œ ì‹¤ì‹œê°„ ì¶”ì ë©ë‹ˆë‹¤.');
        });

        // ìƒí’ˆ ë Œë”ë§
        function renderProducts() {
            const grid = document.getElementById('productGrid');
            grid.innerHTML = '';
            
            products.forEach(product => {
                const productCard = `
                    <div class="col-lg-4 col-md-6 mb-4">
                        <div class="card product-card h-100" onclick="viewProduct(${product.id})">
                            <img src="${product.image}" class="card-img-top" alt="${product.name}" style="height: 200px; object-fit: cover;">
                            <div class="card-body d-flex flex-column">
                                <h6 class="card-title">${product.name}</h6>
                                <div class="mb-2">
                                    <span class="price">${product.price.toLocaleString()}ì›</span>
                                </div>
                                <button class="btn btn-primary mt-auto" onclick="addToCart(${product.id}); event.stopPropagation();">
                                    <i class="fas fa-cart-plus me-1"></i>ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                grid.innerHTML += productCard;
            });
        }

        // í˜ì´ì§€ë·° ì¶”ì 
        function trackPageView(page) {
            LiveInsight.track('page_view', { 
                page: page,
                page_title: document.title
            });
            console.log(`ğŸ“„ í˜ì´ì§€ë·° ì¶”ì : ${page}`);
        }

        // ì „í™˜ ì¶”ì 
        function trackConversion(type) {
            LiveInsight.track('conversion', { 
                conversion_type: type,
                page_url: window.location.href
            });
            console.log(`ğŸ¯ ì „í™˜ ì¶”ì : ${type}`);
        }

        // ìƒí’ˆ ì¡°íšŒ
        function viewProduct(productId) {
            const product = products.find(p => p.id === productId);
            LiveInsight.track('product_view', {
                product_id: productId,
                product_name: product.name,
                product_price: product.price,
                page_url: window.location.href,
                user_action: true  // ì‹¤ì œ ì‚¬ìš©ì ì•¡ì…˜ í‘œì‹œ
            });
            
            console.log(`ğŸ‘¥ [REAL USER ACTION] ìƒí’ˆ ì¡°íšŒ: ${product.name}`);
            
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: #007bff;
                color: white;
                padding: 10px 20px;
                border-radius: 5px;
                z-index: 9999;
                font-size: 14px;
                font-weight: bold;
            `;
            notification.textContent = `ğŸ‘ï¸ ${product.name} ìƒí’ˆ ì¡°íšŒ`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 2000);
        }

        // ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({ ...product, quantity: 1 });
            }
            
            LiveInsight.track('add_to_cart', {
                product_id: productId,
                product_name: product.name,
                product_price: product.price,
                cart_total_items: cart.reduce((sum, item) => sum + item.quantity, 0),
                cart_total_value: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0)
            });
            
            updateCartUI();
            console.log(`ğŸ‘¥ [REAL USER ACTION] ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€: ${product.name}`);
            
            // ì‹œê°ì  í”¼ë“œë°±
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-check me-1"></i>ë‹´ê¹€!';
            btn.classList.add('btn-success');
            btn.classList.remove('btn-primary');
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.classList.add('btn-primary');
                btn.classList.remove('btn-success');
            }, 1000);
        }

        // ì¥ë°”êµ¬ë‹ˆ UI ì—…ë°ì´íŠ¸
        function updateCartUI() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartCount').textContent = totalItems;
        }

        // ì¥ë°”êµ¬ë‹ˆ ë³´ê¸°
        function showCart() {
            LiveInsight.track('view_cart', {
                cart_items: cart.length,
                cart_total_value: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0)
            });
            
            const cartItems = document.getElementById('cartItems');
            const totalPrice = document.getElementById('totalPrice');
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p class="text-center text-muted">ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤</p>';
                totalPrice.textContent = '0';
            } else {
                let itemsHTML = '';
                let total = 0;
                
                cart.forEach(item => {
                    const itemTotal = item.price * item.quantity;
                    total += itemTotal;
                    
                    itemsHTML += `
                        <div class="d-flex justify-content-between align-items-center border-bottom py-2">
                            <div class="d-flex align-items-center">
                                <img src="${item.image}" alt="${item.name}" style="width: 50px; height: 50px; object-fit: cover;" class="me-3">
                                <div>
                                    <h6 class="mb-0">${item.name}</h6>
                                    <small class="text-muted">${item.price.toLocaleString()}ì› Ã— ${item.quantity}</small>
                                </div>
                            </div>
                            <div class="text-end">
                                <div>${itemTotal.toLocaleString()}ì›</div>
                            </div>
                        </div>
                    `;
                });
                
                cartItems.innerHTML = itemsHTML;
                totalPrice.textContent = total.toLocaleString();
            }
            
            console.log(`ğŸ‘€ ì¥ë°”êµ¬ë‹ˆ ì¡°íšŒ`);
            new bootstrap.Modal(document.getElementById('cartModal')).show();
        }

        // ê²°ì œ
        function checkout() {
            const totalValue = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            
            LiveInsight.track('purchase', {
                transaction_id: 'txn_' + Date.now(),
                total_value: totalValue,
                total_items: totalItems,
                products: cart.map(item => ({
                    product_id: item.id,
                    product_name: item.name,
                    quantity: item.quantity,
                    price: item.price
                }))
            });
            
            console.log(`ğŸ‰ êµ¬ë§¤ ì™„ë£Œ! ì´ ${totalItems}ê°œ ìƒí’ˆ, ${totalValue.toLocaleString()}ì›`);
            
            // ì•ŒëŒ ëŒ€ì‹  ì‹œê°ì  í”¼ë“œë°±
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: #28a745;
                color: white;
                padding: 20px 30px;
                border-radius: 10px;
                z-index: 9999;
                font-size: 16px;
                font-weight: bold;
                box-shadow: 0 4px 20px rgba(0,0,0,0.3);
            `;
            notification.innerHTML = `ğŸ‰ êµ¬ë§¤ ì™„ë£Œ!<br>ì´ ${totalItems}ê°œ ìƒí’ˆ, ${totalValue.toLocaleString()}ì›`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 3000);
            
            // ì¥ë°”êµ¬ë‹ˆ ë¹„ìš°ê¸°
            cart = [];
            updateCartUI();
            bootstrap.Modal.getInstance(document.getElementById('cartModal')).hide();
        }

        // ìŠ¤í¬ë¡¤ ì¶”ì 
        let scrollTracked = { 25: false, 50: false, 75: false };
        window.addEventListener('scroll', function() {
            const scrollPercent = Math.round((window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100);
            
            Object.keys(scrollTracked).forEach(threshold => {
                if (scrollPercent >= threshold && !scrollTracked[threshold]) {
                    LiveInsight.track('scroll', { 
                        depth: threshold + '%',
                        page_url: window.location.href
                    });
                    scrollTracked[threshold] = true;
                    console.log(`ğŸ“œ ìŠ¤í¬ë¡¤ ì¶”ì : ${threshold}%`);
                }
            });
        });

        // ìë™ ë°ëª¨ ì‹œë®¬ë ˆì´ì…˜ (ì„ íƒì‚¬í•­)
        function startAutoDemo() {
            console.log('ğŸ¤– ìë™ ë°ëª¨ ì‹œì‘...');
            
            // ë” ë§ì€ ì´ë²¤íŠ¸ ìƒì„±
            const actions = [
                () => { console.log('ğŸ¤– í™ˆí˜ì´ì§€ ì¡°íšŒ'); trackPageView('/'); },
                () => { console.log('ğŸ¤– ìƒí’ˆ 1 ì¡°íšŒ'); viewProduct(1); },
                () => { console.log('ğŸ¤– ìƒí’ˆ 2 ì¡°íšŒ'); viewProduct(2); },
                () => { console.log('ğŸ¤– ìƒí’ˆ 3 ì¡°íšŒ'); viewProduct(3); },
                () => { console.log('ğŸ¤– ìƒí’ˆ 1 ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€'); addToCart(1); },
                () => { console.log('ğŸ¤– ìƒí’ˆ 2 ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€'); addToCart(2); },
                () => { console.log('ğŸ¤– ì¥ë°”êµ¬ë‹ˆ í™•ì¸'); showCart(); },
                () => { console.log('ğŸ¤– êµ¬ë§¤ ì™„ë£Œ'); checkout(); },
                () => { console.log('ğŸ¤– ìƒí’ˆ 4 ì¡°íšŒ'); viewProduct(4); },
                () => { console.log('ğŸ¤– ìƒí’ˆ 5 ì¡°íšŒ'); viewProduct(5); }
            ];
            
            actions.forEach((action, index) => {
                setTimeout(action, (index + 1) * 2000);
            });
        }
        
        // ì§€ì†ì ì¸ ë°ëª¨ ì´ë²¤íŠ¸ ìƒì„± (ì•ŒëŒ ì—†ì´)
        function startContinuousDemo() {
            console.log('ğŸ”„ ì§€ì†ì ì¸ ë°ëª¨ ì‹œì‘...');
            
            setInterval(() => {
                // 30% í™•ë¥ ë¡œë§Œ ì´ë²¤íŠ¸ ìƒì„± (ë„ˆë¬´ ë§ì§€ ì•Šê²Œ)
                if (Math.random() > 0.7) {
                    const randomAction = Math.floor(Math.random() * 4);
                    const randomProduct = Math.floor(Math.random() * 6) + 1;
                    
                    switch(randomAction) {
                        case 0:
                            LiveInsight.track('page_view', { page: '/products', silent: true });
                            break;
                        case 1:
                            const product = products.find(p => p.id === randomProduct);
                            LiveInsight.track('product_view', {
                                product_id: randomProduct,
                                product_name: product.name,
                                product_price: product.price,
                                silent: true
                            });
                            break;
                        case 2:
                            if (Math.random() > 0.8) {
                                LiveInsight.track('add_to_cart', {
                                    product_id: randomProduct,
                                    silent: true
                                });
                            }
                            break;
                        case 3:
                            if (Math.random() > 0.95) {
                                LiveInsight.track('purchase', {
                                    transaction_id: 'auto_' + Date.now(),
                                    total_value: Math.floor(Math.random() * 500000) + 100000,
                                    silent: true
                                });
                            }
                            break;
                    }
                }
            }, 8000);  // 8ì´ˆë§ˆë‹¤
        }

        // ì½˜ì†”ì—ì„œ ìë™ ë°ëª¨ ì‹¤í–‰ ê°€ëŠ¥
        window.startAutoDemo = startAutoDemo;
        window.startContinuousDemo = startContinuousDemo;
        
        console.log('ğŸ’¡ ìë™ ë°ëª¨: startAutoDemo() - ì¼íšŒì„± ë°ëª¨');
        console.log('ğŸ’¡ ì§€ì† ë°ëª¨: startContinuousDemo() - ì§€ì†ì ì¸ ì´ë²¤íŠ¸ ìƒì„±');
        
        // ìë™ìœ¼ë¡œ ì§€ì† ë°ëª¨ ì‹œì‘ (10ì´ˆ í›„)
        setTimeout(() => {
            console.log('ğŸš€ ì§€ì†ì ì¸ ë°ëª¨ ìë™ ì‹œì‘!');
            startContinuousDemo();
        }, 10000);
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>