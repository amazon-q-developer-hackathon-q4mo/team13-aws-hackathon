# LiveInsight ë°°í¬ ê°€ì´ë“œ

## ğŸ“‹ ë°°í¬ ê°œìš”

LiveInsightëŠ” AWS ì„œë²„ë¦¬ìŠ¤ ì•„í‚¤í…ì²˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì‹¤ì‹œê°„ ì›¹ì‚¬ì´íŠ¸ ì‚¬ìš©ì í–‰ë™ ë¶„ì„ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ì´ ê°€ì´ë“œëŠ” ì „ì²´ ì¸í”„ë¼ë¥¼ ì²˜ìŒë¶€í„° ë°°í¬í•˜ëŠ” ë°©ë²•ì„ ì„¤ëª…í•©ë‹ˆë‹¤.

## ğŸ—ï¸ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ì›¹ì‚¬ì´íŠ¸   â”‚â”€â”€â”€â–¶â”‚ API Gateway  â”‚â”€â”€â”€â–¶â”‚   Lambda    â”‚â”€â”€â”€â–¶â”‚  DynamoDB    â”‚
â”‚ (JS ì¶”ì )   â”‚    â”‚              â”‚    â”‚ EventCollectorâ”‚    â”‚   Tables     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚                    â”‚                   â”‚
                           â”‚                    â–¼                   â”‚
                           â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
                           â”‚            â”‚ CloudWatch  â”‚             â”‚
                           â”‚            â”‚ Monitoring  â”‚             â”‚
                           â”‚            â”‚ + X-Ray     â”‚             â”‚
                           â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
                           â”‚                                        â”‚
                           â–¼                                        â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚ Django API   â”‚â—€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ ActiveSessionsâ”‚
                   â”‚ (ECS Fargate)â”‚                        â”‚   (TTL 30ë¶„)  â”‚
                   â”‚ + ìºì‹œ ìµœì í™” â”‚                        â”‚              â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                   â”‚     ALB      â”‚
                   â”‚ (Load Balancer)â”‚
                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ› ï¸ ì‚¬ì „ ìš”êµ¬ì‚¬í•­

### í•„ìˆ˜ ë„êµ¬
- **AWS CLI** (v2.0+)
- **Terraform** (v1.0+)
- **Python** (3.11+)
- **Docker** (20.0+)
- **Git**
- **jq** (JSON ì²˜ë¦¬ìš©)

### AWS ê¶Œí•œ
ë‹¤ìŒ AWS ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤:
- **DynamoDB** (í…Œì´ë¸” ìƒì„±/ê´€ë¦¬)
- **Lambda** (í•¨ìˆ˜ ìƒì„±/ê´€ë¦¬)
- **API Gateway** (REST API ìƒì„±/ê´€ë¦¬)
- **ECS** (í´ëŸ¬ìŠ¤í„°/ì„œë¹„ìŠ¤ ìƒì„±/ê´€ë¦¬)
- **ECR** (ë¦¬í¬ì§€í† ë¦¬ ìƒì„±/ê´€ë¦¬)
- **VPC** (ë„¤íŠ¸ì›Œí¬ ë¦¬ì†ŒìŠ¤ ìƒì„±/ê´€ë¦¬)
- **ALB** (ë¡œë“œë°¸ëŸ°ì„œ ìƒì„±/ê´€ë¦¬)
- **IAM** (ì—­í• /ì •ì±… ìƒì„±/ê´€ë¦¬)
- **CloudWatch** (ë©”íŠ¸ë¦­/ì•ŒëŒ/ëŒ€ì‹œë³´ë“œ ìƒì„±/ê´€ë¦¬)
- **X-Ray** (íŠ¸ë ˆì´ì‹± ì„¤ì •)

## ğŸš€ ë°°í¬ ë‹¨ê³„

### 1ë‹¨ê³„: í™˜ê²½ ì„¤ì •

```bash
# ì €ì¥ì†Œ í´ë¡ 
git clone https://github.com/amazon-q-developer-hackathon-q4mo/team13-aws-hackathon.git
cd team13-aws-hackathon

# AWS CLI ì„¤ì • í™•ì¸
aws configure list
aws sts get-caller-identity

# ë¦¬ì „ ì„¤ì • (us-east-1 ê¶Œì¥)
export AWS_DEFAULT_REGION=us-east-1
```

### 2ë‹¨ê³„: Terraform ì´ˆê¸°í™”

```bash
cd infrastructure

# Terraform ì´ˆê¸°í™”
terraform init

# ë°°í¬ ê³„íš í™•ì¸
terraform plan

# ë³€ìˆ˜ íŒŒì¼ í™•ì¸ (í•„ìš”ì‹œ ìˆ˜ì •)
cat terraform.tfvars
```

### 3ë‹¨ê³„: ì¸í”„ë¼ ë°°í¬

#### Phase 1-5: DynamoDB ì¸í”„ë¼
```bash
# DynamoDB ì¸í”„ë¼ ë°°í¬
cd infrastructure
terraform init
terraform apply -auto-approve
```

#### Phase 6: ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸í”„ë¼
```bash
# ECS Fargate ì¸í”„ë¼ ë°°í¬
cd web-app
terraform init
terraform apply -auto-approve
```

#### Phase 7: ê³ ê¸‰ ëª¨ë‹ˆí„°ë§ ì¸í”„ë¼
```bash
# ëª¨ë‹ˆí„°ë§ ì¸í”„ë¼ ë°°í¬
cd ../monitoring
terraform init
terraform apply -auto-approve
```

#### í†µí•© ë°°í¬ (ê¶Œì¥)
```bash
# ì „ì²´ ìë™ ë°°í¬
cd ../../
chmod +x scripts/deploy.sh
./scripts/deploy.sh

# ë¸”ë£¨-ê·¸ë¦° ë°°í¬
./scripts/blue-green-deploy.sh
```

### 4ë‹¨ê³„: ë°°í¬ ê²€ì¦

#### ê¸°ë³¸ ê²€ì¦
```bash
# DynamoDB ì¸í”„ë¼ ìƒíƒœ í™•ì¸
cd infrastructure
terraform output

# ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ìƒíƒœ í™•ì¸
cd web-app
terraform output

# ALB DNS ì´ë¦„ í™•ì¸
ALB_DNS=$(terraform output -raw alb_dns_name)
echo "Application URL: http://$ALB_DNS"
```

#### Phase 7 í†µí•© í…ŒìŠ¤íŠ¸
```bash
# í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰
cd ../../
./scripts/run-tests.sh all

# ê°œë³„ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
./scripts/run-tests.sh e2e "http://$ALB_DNS" "$(cd infrastructure && terraform output -raw api_gateway_url)"
./scripts/run-tests.sh performance "http://$ALB_DNS" "$(cd infrastructure && terraform output -raw api_gateway_url)"
```

#### í—¬ìŠ¤ì²´í¬
```bash
# Django ì• í”Œë¦¬ì¼€ì´ì…˜ í—¬ìŠ¤ì²´í¬
curl -f "http://$ALB_DNS/health/"

# API ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
curl "http://$ALB_DNS/api/sessions/active/"
```

## ğŸ“Š ë°°í¬ë˜ëŠ” ë¦¬ì†ŒìŠ¤

### Phase 1-5: DynamoDB ì¸í”„ë¼

### DynamoDB í…Œì´ë¸” (3ê°œ)
```
LiveInsight-Events
â”œâ”€â”€ PK: event_id (String)
â”œâ”€â”€ SK: timestamp (Number)
â”œâ”€â”€ GSI: UserIndex (user_id, timestamp)
â””â”€â”€ GSI: SessionIndex (session_id, timestamp)

LiveInsight-Sessions
â”œâ”€â”€ PK: session_id (String)
â””â”€â”€ GSI: UserIndex (user_id, start_time)

LiveInsight-ActiveSessions
â”œâ”€â”€ PK: session_id (String)
â””â”€â”€ TTL: expires_at (30ë¶„)
```

### Lambda í•¨ìˆ˜ (1ê°œ)
```
LiveInsight-EventCollector
â”œâ”€â”€ Runtime: Python 3.9
â”œâ”€â”€ Memory: 512MB
â”œâ”€â”€ Timeout: 30ì´ˆ
â”œâ”€â”€ Environment Variables:
â”‚   â”œâ”€â”€ EVENTS_TABLE=LiveInsight-Events
â”‚   â”œâ”€â”€ SESSIONS_TABLE=LiveInsight-Sessions
â”‚   â””â”€â”€ ACTIVE_SESSIONS_TABLE=LiveInsight-ActiveSessions
â””â”€â”€ X-Ray Tracing: Active
```

### API Gateway (1ê°œ)
```
LiveInsight-API
â”œâ”€â”€ Type: REST API
â”œâ”€â”€ Stage: prod
â”œâ”€â”€ Endpoint: /events (POST, OPTIONS)
â”œâ”€â”€ CORS: Enabled
â””â”€â”€ Integration: Lambda Proxy
```

### Phase 6: ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸í”„ë¼
```
ECS Fargate:
â”œâ”€â”€ Cluster: liveinsight-cluster
â”œâ”€â”€ Service: liveinsight-service (1-4 tasks)
â”œâ”€â”€ Task Definition: Django ì• í”Œë¦¬ì¼€ì´ì…˜
â””â”€â”€ Auto Scaling: CPU ê¸°ë°˜ (70% ì„ê³„ê°’)

Networking:
â”œâ”€â”€ VPC: 10.0.0.0/16
â”œâ”€â”€ Public Subnets: 2ê°œ (ALBìš©)
â”œâ”€â”€ Private Subnets: 2ê°œ (ECSìš©)
â”œâ”€â”€ NAT Gateway: 2ê°œ
â””â”€â”€ Internet Gateway: 1ê°œ

Load Balancer:
â”œâ”€â”€ ALB: liveinsight-alb
â”œâ”€â”€ Target Group: liveinsight-tg
â”œâ”€â”€ Health Check: /health/
â””â”€â”€ Listener: HTTP:80

Container Registry:
â”œâ”€â”€ ECR Repository: liveinsight-app
â”œâ”€â”€ Image Scanning: Enabled
â””â”€â”€ Lifecycle Policy: ìµœê·¼ 10ê°œ ì´ë¯¸ì§€ ìœ ì§€
```

### Phase 7: ê³ ê¸‰ ëª¨ë‹ˆí„°ë§ ì¸í”„ë¼
```
CloudWatch Advanced:
â”œâ”€â”€ Custom Metrics:
â”‚   â”œâ”€â”€ LiveInsight/EventsProcessed
â”‚   â””â”€â”€ LiveInsight/ProcessingTime
â”œâ”€â”€ Business Dashboard: ë¹„ì¦ˆë‹ˆìŠ¤ ë©”íŠ¸ë¦­
â”œâ”€â”€ Advanced Alarms:
â”‚   â”œâ”€â”€ API Error Rate (>10 errors/5min)
â”‚   â”œâ”€â”€ High Response Time (>500ms)
â”‚   â”œâ”€â”€ Lambda Duration (>5s)
â”‚   â””â”€â”€ Predictive Scaling (>1000 req/5min)
â””â”€â”€ Log Metric Filters: ìë™ ë©”íŠ¸ë¦­ ìƒì„±

X-Ray Tracing:
â”œâ”€â”€ Sampling Rate: 10%
â”œâ”€â”€ Service Map: í™œì„±í™”
â””â”€â”€ Trace Analysis: í™œì„±í™”

Caching:
â”œâ”€â”€ Django Local Memory Cache
â”œâ”€â”€ Active Sessions Cache: 30ì´ˆ
â””â”€â”€ Statistics Cache: 10ë¶„
```

## ğŸ”§ í™˜ê²½ë³„ ë°°í¬

### Phase 7 ì„±ëŠ¥ ìµœì í™” ì„¤ì •

### ê°œë°œ í™˜ê²½
```bash
# ê°œë°œìš© ë³€ìˆ˜ ì„¤ì •
cat > terraform.tfvars << EOF
aws_region = "us-east-1"
environment = "development"
project_name = "LiveInsight-Dev"
# Phase 7 ìµœì í™” ì„¤ì •
cache_enabled = true
monitoring_level = "basic"
EOF

# ê°œë°œ í™˜ê²½ ë°°í¬
./scripts/deploy.sh

# ê°œë°œ ì„œë²„ ì‹¤í–‰ (ë¡œì»¬)
./scripts/dev.sh native
```

### í”„ë¡œë•ì…˜ í™˜ê²½
```bash
# í”„ë¡œë•ì…˜ìš© ë³€ìˆ˜ ì„¤ì •
cat > terraform.tfvars << EOF
aws_region = "us-east-1"
environment = "production"
project_name = "LiveInsight"
# Phase 7 ìµœì í™” ì„¤ì •
cache_enabled = true
monitoring_level = "advanced"
x_ray_tracing = true
auto_scaling_enabled = true
EOF

# ë¸”ë£¨-ê·¸ë¦° ë°°í¬ (í”„ë¡œë•ì…˜ ê¶Œì¥)
./scripts/blue-green-deploy.sh
```

## ğŸ“ ë°°í¬ í›„ ì„¤ì •

### 1. API Gateway URL í™•ì¸
```bash
# API Gateway URL ì¶œë ¥
terraform output api_gateway_url

# í™˜ê²½ ë³€ìˆ˜ë¡œ ì €ì¥
export API_GATEWAY_URL=$(terraform output -raw api_gateway_url)
echo "API Gateway URL: $API_GATEWAY_URL"
```

### 2. CloudWatch ëŒ€ì‹œë³´ë“œ ì„¤ì •
```bash
# ëŒ€ì‹œë³´ë“œ URL ìƒì„±
echo "CloudWatch Dashboard: https://console.aws.amazon.com/cloudwatch/home?region=$AWS_DEFAULT_REGION#dashboards:"
```

### 3. Phase 7 ëª¨ë‹ˆí„°ë§ ì„¤ì •
```bash
# CloudWatch ëŒ€ì‹œë³´ë“œ URL
echo "Business Dashboard: https://console.aws.amazon.com/cloudwatch/home?region=$AWS_DEFAULT_REGION#dashboards:name=LiveInsight-BusinessMetrics"

# X-Ray ì„œë¹„ìŠ¤ ë§µ
echo "X-Ray Service Map: https://console.aws.amazon.com/xray/home?region=$AWS_DEFAULT_REGION#/service-map"

# ìºì‹œ ìƒíƒœ í™•ì¸
curl "http://$(cd infrastructure/web-app && terraform output -raw alb_dns_name)/api/sessions/active/" -w "Response Time: %{time_total}s\n"
```

### 4. ê°œë°œì B ì—°ë™ ì •ë³´
```bash
# ì—°ë™ ì •ë³´ ì¶œë ¥
echo "=== ê°œë°œì B ì—°ë™ ì •ë³´ ==="
echo "Django Application URL: http://$(cd infrastructure/web-app && terraform output -raw alb_dns_name)"
echo "API Gateway URL: $(cd infrastructure && terraform output -raw api_gateway_url)"
echo "Events Table: $(cd infrastructure && terraform output -raw events_table_name)"
echo "Sessions Table: $(cd infrastructure && terraform output -raw sessions_table_name)"
echo "ActiveSessions Table: $(cd infrastructure && terraform output -raw active_sessions_table_name)"
```

## ğŸ§ª ë°°í¬ ê²€ì¦

### Phase 7 í†µí•© í…ŒìŠ¤íŠ¸ ì‹¤í–‰
```bash
# í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ê¶Œí•œ ë¶€ì—¬
chmod +x scripts/*.sh

# ì „ì²´ í†µí•© í…ŒìŠ¤íŠ¸
./scripts/run-tests.sh all

# E2E í…ŒìŠ¤íŠ¸
./scripts/run-tests.sh e2e

# ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
./scripts/run-tests.sh performance

# ë¡œì»¬ Django í…ŒìŠ¤íŠ¸
./scripts/test.sh local

# ë°°í¬ëœ ì• í”Œë¦¬ì¼€ì´ì…˜ í…ŒìŠ¤íŠ¸
./scripts/test.sh deployment
```

### ìˆ˜ë™ ê²€ì¦
```bash
# 1. DynamoDB í…Œì´ë¸” ìƒíƒœ í™•ì¸
aws dynamodb list-tables --query 'TableNames[?contains(@, `LiveInsight`)]'

# 2. Lambda í•¨ìˆ˜ ìƒíƒœ í™•ì¸
aws lambda get-function --function-name LiveInsight-EventCollector

# 3. ECS ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
aws ecs describe-services --cluster liveinsight-cluster --services liveinsight-service

# 4. ALB í—¬ìŠ¤ì²´í¬ í™•ì¸
ALB_DNS=$(cd infrastructure/web-app && terraform output -raw alb_dns_name)
curl -f "http://$ALB_DNS/health/"

# 5. Django API í…ŒìŠ¤íŠ¸
curl "http://$ALB_DNS/api/sessions/active/"
curl "http://$ALB_DNS/api/statistics/hourly/"

# 6. ìºì‹œ ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
time curl "http://$ALB_DNS/api/sessions/active/" # ì²« ë²ˆì§¸ ìš”ì²­
time curl "http://$ALB_DNS/api/sessions/active/" # ìºì‹œëœ ìš”ì²­

# 7. CloudWatch ë©”íŠ¸ë¦­ í™•ì¸
aws cloudwatch list-metrics --namespace LiveInsight
aws cloudwatch list-metrics --namespace AWS/ECS
aws cloudwatch list-metrics --namespace AWS/ApplicationELB

# 8. X-Ray íŠ¸ë ˆì´ìŠ¤ í™•ì¸
aws xray get-service-graph --start-time $(date -d '1 hour ago' +%s) --end-time $(date +%s)
```

## ğŸ”„ ì—…ë°ì´íŠ¸ ë° ì¬ë°°í¬

### Django ì• í”Œë¦¬ì¼€ì´ì…˜ ì—…ë°ì´íŠ¸
```bash
# ì¼ë°˜ ë°°í¬
./scripts/deploy.sh

# ë¸”ë£¨-ê·¸ë¦° ë°°í¬ (ë¬´ì¤‘ë‹¨)
./scripts/blue-green-deploy.sh

# íŠ¹ì • ì´ë¯¸ì§€ íƒœê·¸ë¡œ ë°°í¬
./scripts/blue-green-deploy.sh v1.2.0
```

### Lambda í•¨ìˆ˜ ì½”ë“œ ì—…ë°ì´íŠ¸
```bash
# Lambda í•¨ìˆ˜ ì½”ë“œë§Œ ì—…ë°ì´íŠ¸
cd infrastructure
zip -f lambda_function.zip lambda_function.py
aws lambda update-function-code \
  --function-name LiveInsight-EventCollector \
  --zip-file fileb://lambda_function.zip
```

### ì¸í”„ë¼ ì—…ë°ì´íŠ¸
```bash
# Terraformìœ¼ë¡œ ì¸í”„ë¼ ì—…ë°ì´íŠ¸
terraform plan
terraform apply
```

### ë¡¤ë°±
```bash
# ECS ì„œë¹„ìŠ¤ ë¡¤ë°± (ìë™)
./scripts/rollback.sh

# Lambda í•¨ìˆ˜ ë¡¤ë°±
cd infrastructure
chmod +x rollback.sh
./rollback.sh

# Terraformìœ¼ë¡œ íŠ¹ì • ë¦¬ì†ŒìŠ¤ ë¡¤ë°±
terraform apply -target=aws_lambda_function.event_collector
terraform apply -target=aws_ecs_service.app
```

## ğŸ—‘ï¸ ë¦¬ì†ŒìŠ¤ ì‚­ì œ

### ì „ì²´ ì‚­ì œ
```bash
# Terraformìœ¼ë¡œ ëª¨ë“  ë¦¬ì†ŒìŠ¤ ì‚­ì œ
terraform destroy -auto-approve

# í™•ì¸
aws dynamodb list-tables --query 'TableNames[?contains(@, `LiveInsight`)]'
```

### ì„ íƒì  ì‚­ì œ
```bash
# íŠ¹ì • ë¦¬ì†ŒìŠ¤ë§Œ ì‚­ì œ
terraform destroy -target=aws_dynamodb_table.events
terraform destroy -target=aws_lambda_function.event_collector
```

## ğŸ’° ë¹„ìš© ìµœì í™”

### ì˜ˆìƒ ë¹„ìš© (ì›”ê°„) - Phase 7 í¬í•¨
```
Phase 1-5: DynamoDB ì¸í”„ë¼
â”œâ”€â”€ DynamoDB (í”„ë¡œë¹„ì €ë‹ ëª¨ë“œ): ~$12
â”œâ”€â”€ Lambda (100ë§Œ ìš”ì²­): ~$2.20
â””â”€â”€ API Gateway (100ë§Œ ìš”ì²­): ~$3.50
ì†Œê³„: ~$18/ì›”

Phase 6: ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¸í”„ë¼
â”œâ”€â”€ ECS Fargate (1 íƒœìŠ¤í¬): ~$15
â”œâ”€â”€ ALB: ~$20
â”œâ”€â”€ NAT Gateway (2ê°œ): ~$32
â”œâ”€â”€ ECR ìŠ¤í† ë¦¬ì§€: ~$2
â””â”€â”€ ê¸°ë³¸ CloudWatch: ~$5
ì†Œê³„: ~$74/ì›”

Phase 7: ê³ ê¸‰ ëª¨ë‹ˆí„°ë§
â”œâ”€â”€ ê³ ê¸‰ CloudWatch ë©”íŠ¸ë¦­: ~$10
â”œâ”€â”€ X-Ray íŠ¸ë ˆì´ì‹±: ~$5
â””â”€â”€ ì¶”ê°€ ë¡œê·¸ ìŠ¤í† ë¦¬ì§€: ~$3
ì†Œê³„: ~$18/ì›”

ì´ ì˜ˆìƒ ë¹„ìš©: ~$110/ì›” (ì „ì²´ ì‹œìŠ¤í…œ)
```

### ë¹„ìš© ì ˆì•½ ë°©ë²•
```bash
# DynamoDB On-Demand ëª¨ë“œë¡œ ë³€ê²½
terraform apply -var="billing_mode=PAY_PER_REQUEST"

# ECS íƒœìŠ¤í¬ ìˆ˜ ì¡°ì • (ê°œë°œ í™˜ê²½)
terraform apply -var="ecs_desired_count=1"

# NAT Gateway 1ê°œë¡œ ì¶•ì†Œ (ê°œë°œ í™˜ê²½)
terraform apply -var="nat_gateway_count=1"

# CloudWatch ë¡œê·¸ ë³´ì¡´ ê¸°ê°„ ë‹¨ì¶•
terraform apply -var="log_retention_days=7"

# X-Ray ìƒ˜í”Œë§ ë¹„ìœ¨ ì¡°ì •
terraform apply -var="xray_sampling_rate=0.05"
```

## ğŸš¨ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### ì¼ë°˜ì ì¸ ë¬¸ì œ

#### 1. Terraform ì´ˆê¸°í™” ì‹¤íŒ¨
```bash
# í•´ê²°ë°©ë²•
rm -rf .terraform
terraform init
```

#### 2. IAM ê¶Œí•œ ë¶€ì¡±
```bash
# í•„ìš”í•œ ê¶Œí•œ í™•ì¸
aws iam simulate-principal-policy \
  --policy-source-arn $(aws sts get-caller-identity --query Arn --output text) \
  --action-names dynamodb:CreateTable lambda:CreateFunction
```

#### 3. Lambda ë°°í¬ ì‹¤íŒ¨
```bash
# ë¡œê·¸ í™•ì¸
aws logs describe-log-groups --log-group-name-prefix /aws/lambda/LiveInsight

# í•¨ìˆ˜ ìƒíƒœ í™•ì¸
aws lambda get-function --function-name LiveInsight-EventCollector
```

#### 4. ECS ì„œë¹„ìŠ¤ ì‹œì‘ ì‹¤íŒ¨
```bash
# ECS ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
aws ecs describe-services --cluster liveinsight-cluster --services liveinsight-service

# íƒœìŠ¤í¬ ë¡œê·¸ í™•ì¸
aws logs filter-log-events \
  --log-group-name /ecs/liveinsight \
  --start-time $(date -d '1 hour ago' +%s)000
```

#### 5. ALB í—¬ìŠ¤ì²´í¬ ì‹¤íŒ¨
```bash
# íƒ€ê²Ÿ ê·¸ë£¹ ìƒíƒœ í™•ì¸
aws elbv2 describe-target-health --target-group-arn $(cd infrastructure/web-app && terraform output -raw target_group_arn)

# Django í—¬ìŠ¤ì²´í¬ ì—”ë“œí¬ì¸íŠ¸ í…ŒìŠ¤íŠ¸
curl -v "http://$(cd infrastructure/web-app && terraform output -raw alb_dns_name)/health/"
```

#### 6. ìºì‹œ ì„±ëŠ¥ ë¬¸ì œ
```bash
# Django ìºì‹œ ìƒíƒœ í™•ì¸
cd src
python manage.py shell -c "from django.core.cache import cache; print(cache.get('active_sessions'))"

# ìºì‹œ í†µê³„ í™•ì¸
curl "http://$(cd ../infrastructure/web-app && terraform output -raw alb_dns_name)/api/sessions/active/" -w "Time: %{time_total}s\n"
```

#### 7. API Gateway 5xx ì—ëŸ¬
```bash
# Lambda ë¡œê·¸ í™•ì¸
aws logs filter-log-events \
  --log-group-name /aws/lambda/LiveInsight-EventCollector \
  --start-time $(date -d '1 hour ago' +%s)000

# X-Ray íŠ¸ë ˆì´ìŠ¤ í™•ì¸
aws xray get-trace-summaries \
  --time-range-type TimeRangeByStartTime \
  --start-time $(date -d '1 hour ago' +%s) \
  --end-time $(date +%s)
```

## ğŸ“ ì§€ì› ë° ë¬¸ì˜

### ë¬¸ì„œ ì°¸ì¡°
- [AWS Lambda ê°œë°œì ê°€ì´ë“œ](https://docs.aws.amazon.com/lambda/)
- [Amazon DynamoDB ê°œë°œì ê°€ì´ë“œ](https://docs.aws.amazon.com/dynamodb/)
- [Amazon API Gateway ê°œë°œì ê°€ì´ë“œ](https://docs.aws.amazon.com/apigateway/)

### ë¡œê·¸ ë° ëª¨ë‹ˆí„°ë§
- **CloudWatch ë¡œê·¸**: `/aws/lambda/LiveInsight-EventCollector`
- **CloudWatch ë©”íŠ¸ë¦­**: `LiveInsight` ë„¤ì„ìŠ¤í˜ì´ìŠ¤
- **X-Ray íŠ¸ë ˆì´ì‹±**: Lambda í•¨ìˆ˜ì—ì„œ í™œì„±í™”ë¨

ì´ ë°°í¬ ê°€ì´ë“œë¥¼ ë”°ë¼í•˜ë©´ LiveInsight ì¸í”„ë¼ë¥¼ ì„±ê³µì ìœ¼ë¡œ ë°°í¬í•˜ê³  ìš´ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.